{"expireTime":9007200911206587000,"key":"transformer-remark-markdown-html-a825f23c7d900b7e4a976ff1bce5fca5-gatsby-remark-prismjs-","val":"<h2><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#handling_events\" title=\"Permalink to Handling events\">Handling events</a></h2>\n<p>If you've only written vanilla JavaScript before now, you might be used to having a separate JavaScript file, where you query for some DOM nodes and attach listeners to them. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//x</span>\n<span class=\"token keyword\">const</span> btn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbtn<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hi!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In React, we write event handlers directly on the elements in our JSX, like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//x</span>\n<span class=\"token operator\">&lt;</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"button\"</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hi!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    Say hi<span class=\"token operator\">!</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span></code></pre></div>\n<p><strong>Note:</strong> This may seem counter-intuitive regarding best-practice advice that tends to advise against use of inline event handlers on HTML, but remember that JSX is actually part of your JavaScript.</p>\n<p>In the above example, we're adding an <code class=\"language-text\">onClick</code> attribute to the <code class=\"language-text\">&lt;button></code> element. The value of that attribute is a function that triggers a simple alert.</p>\n<p>The <code class=\"language-text\">onClick</code> attribute has special meaning here: it tells React to run a given function when the user clicks on the button. There are a couple of other things to note:</p>\n<ul>\n<li>The camel-cased nature of <code class=\"language-text\">onClick</code> is important — JSX will not recognize <code class=\"language-text\">onclick</code> (again, it is already used in JavaScript for a specific purpose, which is related but different — standard <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onclick\"><code class=\"language-text\">onclick</code></a> handler properties).</li>\n<li>All browser events follow this format in JSX – <code class=\"language-text\">on</code>, followed by the name of the event.</li>\n</ul>\n<p>Let's apply this to our app, starting in the <code class=\"language-text\">Form.js</code> component.</p>\n<h3><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#handling_form_submission\" title=\"Permalink to Handling form submission\">Handling form submission</a></h3>\n<p>At the top of the <code class=\"language-text\">Form()</code> component function, create a function named <code class=\"language-text\">handleSubmit()</code>. This function should <a href=\"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#preventing_default_behavior\">prevent the default behavior of the <code class=\"language-text\">submit</code> event</a>. After that, it should trigger an <code class=\"language-text\">alert()</code>, which can say whatever you'd like. It should end up looking something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//x</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, world!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To use this function, add an <code class=\"language-text\">onSubmit</code> attribute to the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form\"><code class=\"language-text\">&lt;form></code></a> element, and set its value to the <code class=\"language-text\">handleSubmit</code> function:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;form onSubmit={handleSubmit}></code></pre></div>\n<p>Now if you head back to your browser and click on the \"Add\" button, your browser will show you an alert dialog with the words \"Hello, world!\" — or whatever you chose to write there.</p>\n<h2><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#callback_props\" title=\"Permalink to Callback props\">Callback props</a></h2>\n<p>In React applications, interactivity is rarely confined to just one component: events that happen in one component will affect other parts of the app. When we start giving ourselves the power to make new tasks, things that happen in the <code class=\"language-text\">&lt;Form /></code> component will affect the list rendered in <code class=\"language-text\">&lt;App /></code>.</p>\n<p>We want our <code class=\"language-text\">handleSubmit()</code> function to ultimately help us create a new task, so we need a way to pass information from <code class=\"language-text\">&lt;Form /></code> to <code class=\"language-text\">&lt;App /></code>. We can't pass data from child to parent in the same way as we pass data from parent to child using standard props. Instead, we can write a function in <code class=\"language-text\">&lt;App /></code> that will expect some data from our form as an input, then pass that function to <code class=\"language-text\">&lt;Form /></code> as a prop. This function-as-a-prop is called a callback prop. Once we have our callback prop, we can call it inside <code class=\"language-text\">&lt;Form /></code> to send the right data to <code class=\"language-text\">&lt;App /></code>.</p>\n<h3><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#handling_form_submission_via_callbacks\" title=\"Permalink to Handling form submission via callbacks\">Handling form submission via callbacks</a></h3>\n<p>Inside the top of our <code class=\"language-text\">App()</code> component function, create a function named <code class=\"language-text\">addTask()</code> which has a single parameter of <code class=\"language-text\">name</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function addTask(name) {\n  alert(name);\n}</code></pre></div>\n<p>Next, we'll pass <code class=\"language-text\">addTask()</code> into <code class=\"language-text\">&lt;Form /></code> as a prop. The prop can have whatever name you want, but pick a name you'll understand later. Something like <code class=\"language-text\">addTask</code> works, because it matches the name of the function as well as what the function will do. Your <code class=\"language-text\">&lt;Form /></code> component call should be updated as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;Form addTask={addTask} /></code></pre></div>\n<p>Finally, you can use this prop inside the <code class=\"language-text\">handleSubmit()</code> function in your <code class=\"language-text\">&lt;Form /></code> component! Update it as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function handleSubmit(e) {\n  e.preventDefault();\n  props.addTask(\"Say hello!\");\n}</code></pre></div>\n<p>Clicking on the \"Add\" button in your browser will prove that the <code class=\"language-text\">addTask()</code> callback function works, but it'd be nice if we could get the alert to show us what we're typing in our input field! This is what we'll do next.</p>\n<p><strong>Note:</strong> We decided to name our callback prop <code class=\"language-text\">addTask</code> to make it easy to understand what the prop will do. Another common convention you may well come across in React code is to prefix callback prop names with the word <code class=\"language-text\">on</code>, followed by the name of the event that will cause them to be run. For instance, we could have given our form a prop of <code class=\"language-text\">onSubmit</code> with the value of <code class=\"language-text\">addTask</code>.</p>\n<h2><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#state_and_the_usestate_hook\" title=\"Permalink to State and the useState hook\">State and the <code class=\"language-text\">useState</code> hook</a></h2>\n<p>So far, we've used props to pass data through our components and this has served us just fine. Now that we're dealing with user input and data updates, however, we need something more.</p>\n<p>For one thing, props come from the parent of a component. Our <code class=\"language-text\">&lt;Form /></code> will not be inheriting a new name for our task; our <code class=\"language-text\">&lt;input /></code> element lives directly inside of <code class=\"language-text\">&lt;Form /></code>, so <code class=\"language-text\">&lt;Form/></code> will be directly responsible for creating that new name. We can't ask <code class=\"language-text\">&lt;Form /></code> to spontaneously create its own props, but we <em>can</em> ask it to track some of its own data for us. Data such as this, which a component itself owns, is called <strong>state</strong>. State is another powerful tool for React because components not only <em>own</em> state, but can <em>update</em> it later. It's not possible to update the props a component receives; only to read them.</p>\n<p>React provides a variety of special functions that allow us to provide new capabilities to components, like state. These functions are called <strong>hooks</strong>, and the <code class=\"language-text\">useState</code> hook, as its name implies, is precisely the one we need in order to give our component some state.</p>\n<p>To use a React hook, we need to import it from the React module. In <code class=\"language-text\">Form.js</code>, change your very first line so that it reads like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React, { useState } from \"react\";</code></pre></div>\n<p>This allows us to import the <code class=\"language-text\">useState()</code> function by itself, and utilize it anywhere in this file.</p>\n<p><code class=\"language-text\">useState()</code> creates a piece of state for a component, and its only parameter determines the <em>initial value</em> of that state. It returns two things: the state, and a function that can be used to update the state later.</p>\n<p>This is a lot to take in at once, so let's try it out. We're going to make ourselves a <code class=\"language-text\">name</code> state, and a function for updating the <code class=\"language-text\">name</code> state.</p>\n<p>Write the following above your <code class=\"language-text\">handleSubmit()</code> function, inside <code class=\"language-text\">Form()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const [name, setName] = useState('Use hooks!');</code></pre></div>\n<p>What's going on in this line of code?</p>\n<ul>\n<li>We are setting the initial <code class=\"language-text\">name</code> value as \"Use hooks!\".</li>\n<li>We are defining a function whose job is to modify <code class=\"language-text\">name</code>, called <code class=\"language-text\">setName()</code>.</li>\n<li><code class=\"language-text\">useState()</code> returns these two things, so we are using <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\">array destructuring</a> to capture them both in separate variables.</li>\n</ul>\n<h3><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#reading_state\" title=\"Permalink to Reading state\">Reading state</a></h3>\n<p>You can see the <code class=\"language-text\">name</code> state in action right away. Add a <code class=\"language-text\">value</code> attribute to the form's input, and set its value to <code class=\"language-text\">name</code>. Your browser will render \"Use hooks!\" inside the input.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;input\n  type=\"text\"\n  id=\"new-todo-input\"\n  className=\"input input__lg\"\n  name=\"text\"\n  autoComplete=\"off\"\n  value={name}\n/></code></pre></div>\n<p>Change \"Use hooks!\" to an empty string once you're done; this is what we want for our initial state.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const [name, setName] = useState('');</code></pre></div>\n<h3><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#reading_user_input\" title=\"Permalink to Reading user input\">Reading user input</a></h3>\n<p>Before we can change the value of <code class=\"language-text\">name</code>, we need to capture a user's input as they type. For this, we can listen to the <code class=\"language-text\">onChange</code> event. Let's write a <code class=\"language-text\">handleChange()</code> function, and listen for it on the <code class=\"language-text\">&lt;input /></code> tag.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// near the top of the `Form` component\nfunction handleChange(e) {\n  console.log(\"Typing!\");\n}\n\n// Down in the return statement\n&lt;input\n  type=\"text\"\n  id=\"new-todo-input\"\n  className=\"input input__lg\"\n  name=\"text\"\n  autoComplete=\"off\"\n  value={name}\n  onChange={handleChange}\n/></code></pre></div>\n<p>Currently, your input's value will not change as you type, but your browser will log the word \"Typing!\" to the JavaScript console, so we know our event listener is attached to the input. In order to change the input's value, we have to use our <code class=\"language-text\">handleChange()</code> function to update our <code class=\"language-text\">name</code> state.</p>\n<p>To read the contents of the input field as they change, you can access the input's <code class=\"language-text\">value</code> property. We can do this inside <code class=\"language-text\">handleChange()</code> by reading <code class=\"language-text\">e.target.value</code>. <code class=\"language-text\">e.target</code> represents the element that fired the <code class=\"language-text\">change</code> event — that's our input. So, <code class=\"language-text\">value</code> is the text inside it.</p>\n<p>You can <code class=\"language-text\">console.log()</code> this value to see it in your browser's console.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function handleChange(e) {\n  console.log(e.target.value);\n}</code></pre></div>\n<h3><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#updating_state\" title=\"Permalink to Updating state\">Updating state</a></h3>\n<p>Logging isn't enough — we want to actually store the updated state of the name as the input value changes! Change the <code class=\"language-text\">console.log()</code> to <code class=\"language-text\">setName()</code>, as shown below:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function handleChange(e) {\n  setName(e.target.value);\n}</code></pre></div>\n<p>Now we need to change our <code class=\"language-text\">handleSubmit()</code> function so that it calls <code class=\"language-text\">props.addTask</code> with name as an argument — remember our callback prop? This will serve to send the task back to the <code class=\"language-text\">App</code> component, so we can add it to our list of tasks at some later date. As a matter of good practice, you should clear the input after your form submits, so we'll call <code class=\"language-text\">setName()</code> again with an empty string to do so:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function handleSubmit(e) {\n  e.preventDefault();\n  props.addTask(name);\n  setName(\"\");\n}</code></pre></div>\n<p>At last, you can type something into the input field in your browser and click <em>Add</em> — whatever you typed will appear in an alert dialog.</p>\n<p>Your <code class=\"language-text\">Form.js</code> file should now read like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React, { useState } from \"react\";\n\nfunction Form(props) {\n  const [name, setName] = useState(\"\");\n\n  function handleChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.addTask(name);\n    setName(\"\");\n  }\n  return (\n    &lt;form onSubmit={handleSubmit}>\n      &lt;h2 className=\"label-wrapper\">\n        &lt;label htmlFor=\"new-todo-input\" className=\"label__lg\">\n          What needs to be done?\n        &lt;/label>\n      &lt;/h2>\n      &lt;input\n        type=\"text\"\n        id=\"new-todo-input\"\n        className=\"input input__lg\"\n        name=\"text\"\n        autoComplete=\"off\"\n        value={name}\n        onChange={handleChange}\n      />\n      &lt;button type=\"submit\" className=\"btn btn__primary btn__lg\">\n        Add\n      &lt;/button>\n    &lt;/form>\n  );\n}\n\nexport default Form;</code></pre></div>\n<p><strong>Note:</strong> One thing you'll notice is that you are able to submit empty tasks by just pressing the Add button without entering a task name. Can you think of a way to disallow empty tasks from being added? As a hint, you probably need to add some kind of check into the <code class=\"language-text\">handleSubmit()</code> function.</p>\n<h2><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#putting_it_all_together_adding_a_task\" title=\"Permalink to Putting it all together: Adding a task\">Putting it all together: Adding a task</a></h2>\n<p>Now that we've practiced with events, callback props, and hooks we're ready to write functionality that will allow a user to add a new task from their browser.</p>\n<h3><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#tasks_as_state\" title=\"Permalink to Tasks as state\">Tasks as state</a></h3>\n<p>Import <code class=\"language-text\">useState</code> into <code class=\"language-text\">App.js</code>, so that we can store our tasks in state — update your <code class=\"language-text\">React</code> import line to the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React, { useState } from \"react\";</code></pre></div>\n<p>We want to pass <code class=\"language-text\">props.tasks</code> into the <code class=\"language-text\">useState()</code> hook – this will preserve its initial state. Add the following right at the top of your App() function definition:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const [tasks, setTasks] = useState(props.tasks);</code></pre></div>\n<p>Now, we can change our <code class=\"language-text\">taskList</code> mapping so that it is the result of mapping <code class=\"language-text\">tasks</code>, instead of <code class=\"language-text\">props.tasks</code>. Your <code class=\"language-text\">taskList</code> constant declaration should now look like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const taskList = tasks.map(task => (\n    &lt;Todo\n        id={task.id}\n        name={task.name}\n        completed={task.completed}\n        key={task.id}\n      />\n    )\n  );</code></pre></div>\n<h3><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#adding_a_task\" title=\"Permalink to Adding a task\">Adding a task</a></h3>\n<p>We've now got a <code class=\"language-text\">setTasks</code> hook that we can use in our <code class=\"language-text\">addTask()</code> function to update our list of tasks. There's one problem however: we can't just pass the <code class=\"language-text\">name</code> argument of <code class=\"language-text\">addTask()</code> into <code class=\"language-text\">setTasks</code>, because <code class=\"language-text\">tasks</code> is an array of objects and <code class=\"language-text\">name</code> is a string. If we tried to do this, the array would be replaced with the string.</p>\n<p>First of all, we need to put <code class=\"language-text\">name</code> into an object that has the same structure as our existing tasks. Inside of the <code class=\"language-text\">addTask()</code> function, we will make a <code class=\"language-text\">newTask</code> object to add to the array.</p>\n<p>We then need to make a new array with this new task added to it and then update the state of the tasks data to this new state. To do this, we can use spread syntax to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#copy_an_array\">copy the existing array</a>, and add our object at the end. We then pass this array into <code class=\"language-text\">setTasks()</code> to update the state.</p>\n<p>Putting that all together, your <code class=\"language-text\">addTask()</code> function should read like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function addTask(name) {\n  const newTask = { id: \"id\", name: name, completed: false };\n  setTasks([...tasks, newTask]);\n}</code></pre></div>\n<p>Now you can use the browser to add a task to our data! Type anything into the form and click \"Add\" (or press the Enter key) and you'll see your new todo item appear in the UI!</p>\n<p><strong>However, we have another problem</strong>: our <code class=\"language-text\">addTask()</code> function is giving each task the same <code class=\"language-text\">id</code>. This is bad for accessibility, and makes it impossible for React to tell future tasks apart with the <code class=\"language-text\">key</code> prop. In fact, React will give you a warning in your DevTools console — \"Warning: Encountered two children with the same key...\"</p>\n<p>We need to fix this. Making unique identifiers is a hard problem – one for which the JavaScript community has written some helpful libraries. We'll use <a href=\"https://github.com/ai/nanoid\">nanoid</a> because it's tiny, and it works.</p>\n<p>Make sure you're in the root directory of your application and run the following terminal command:</p>\n<p><strong>Note:</strong> If you're using yarn, you'll need the following instead: <code class=\"language-text\">yarn add nanoid</code></p>\n<p>Now we can import <code class=\"language-text\">nanoid</code> into the top of <code class=\"language-text\">App.js</code> so we can use it to create unique IDs for our new tasks. First of all, include the following import line at the top of <code class=\"language-text\">App.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { nanoid } from \"nanoid\";</code></pre></div>\n<p>Now let's update <code class=\"language-text\">addTask()</code> so that each task ID becomes a prefix todo- plus a unique string generated by nanoid. Update your <code class=\"language-text\">newTask</code> constant declaration to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const newTask = { id: \"todo-\" + nanoid(), name: name, completed: false };</code></pre></div>\n<p>Save everything, and try your app again — now you can add tasks without getting that warning about duplicate IDs.</p>\n<h2><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#detour_counting_tasks\" title=\"Permalink to Detour: counting tasks\">Detour: counting tasks</a></h2>\n<p>Now that we can add new tasks, you may notice a problem: our heading reads 3 tasks remaining, no matter how many tasks we have! We can fix this by counting the length of <code class=\"language-text\">taskList</code> and changing the text of our heading accordingly.</p>\n<p>Add this inside your <code class=\"language-text\">App()</code> definition, before the return statement:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const headingText = `${taskList.length} tasks remaining`;</code></pre></div>\n<p>Hrm. This is almost right, except that if our list ever contains a single task, the heading will still use the word \"tasks\". We can make this a variable, too. Update the code you just added as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const tasksNoun = taskList.length !== 1 ? 'tasks' : 'task';\nconst headingText = `${taskList.length} ${tasksNoun} remaining`;</code></pre></div>\n<p>Now you can replace the list heading's text content with the <code class=\"language-text\">headingText</code> variable. Update your <code class=\"language-text\">&lt;h2></code> like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;h2 id=\"list-heading\">{headingText}&lt;/h2></code></pre></div>\n<h2><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#completing_a_task\" title=\"Permalink to Completing a task\">Completing a task</a></h2>\n<p>You might notice that, when you click on a checkbox, it checks and unchecks appropriately. As a feature of HTML, the browser knows how to remember which checkbox inputs are checked or unchecked without our help. This feature hides a problem, however: toggling a checkbox doesn't change the state in our React application. This means that the browser and our app are now out-of-sync. We have to write our own code to put the browser back in sync with our app.</p>\n<h3><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#proving_the_bug\" title=\"Permalink to Proving the bug\">Proving the bug</a></h3>\n<p>Before we fix the problem, let's observe it happening.</p>\n<p>We'll start by writing a <code class=\"language-text\">toggleTaskCompleted()</code> function in our <code class=\"language-text\">App()</code> component. This function will have an <code class=\"language-text\">id</code> parameter, but we're not going to use it yet. For now, we'll log the first task in the array to the console – we're going to inspect what happens when we check or uncheck it in our browser:</p>\n<p>Add this just above your <code class=\"language-text\">taskList</code> constant declaration:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function toggleTaskCompleted(id) {\n  console.log(tasks[0])\n}</code></pre></div>\n<p>Next, we'll add <code class=\"language-text\">toggleTaskCompleted</code> to the props of each <code class=\"language-text\">&lt;Todo /></code> component rendered inside our <code class=\"language-text\">taskList</code>; update it like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const taskList = tasks.map(task => (\n  &lt;Todo\n      id={task.id}\n      name={task.name}\n      completed={task.completed}\n      key={task.id}\n      toggleTaskCompleted={toggleTaskCompleted}\n  />\n));</code></pre></div>\n<p>Next, go over to your <code class=\"language-text\">Todo.js</code> component and add an <code class=\"language-text\">onChange</code> handler to your <code class=\"language-text\">&lt;input /></code> element, which should use an anonymous function to call <code class=\"language-text\">props.toggleTaskCompleted()</code> with a parameter of <code class=\"language-text\">props.id</code>. The <code class=\"language-text\">&lt;input /></code> should now look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;input\n  id={props.id}\n  type=\"checkbox\"\n  defaultChecked={props.completed}\n  onChange={() => props.toggleTaskCompleted(props.id)}\n/></code></pre></div>\n<p>Save everything and return to your browser and notice that our first task, Eat, is checked. Open your JavaScript console, then click on the checkbox next to Eat. It unchecks, as we expect. Your JavaScript console, however, will log something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Object { id: \"task-0\", name: \"Eat\", completed: true }</code></pre></div>\n<p>The checkbox unchecks in the browser, but our console tells us that Eat is still completed. We will fix that next!</p>\n<h3><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#synchronizing_the_browser_with_our_data\" title=\"Permalink to Synchronizing the browser with our data\">Synchronizing the browser with our data</a></h3>\n<p>Let's revisit our <code class=\"language-text\">toggleTaskCompleted()</code> function in <code class=\"language-text\">App.js</code>. We want it to change the <code class=\"language-text\">completed</code> property of only the task that was toggled, and leave all the others alone. To do this, we'll <code class=\"language-text\">map()</code> over the task list and just change the one we completed.</p>\n<p>Update your <code class=\"language-text\">toggleTaskCompleted()</code> function to the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function toggleTaskCompleted(id) {\n  const updatedTasks = tasks.map(task => {\n    // if this task has the same ID as the edited task\n    if (id === task.id) {\n      // use object spread to make a new object\n      // whose `completed` prop has been inverted\n      return {...task, completed: !task.completed}\n    }\n    return task;\n  });\n  setTasks(updatedTasks);\n}</code></pre></div>\n<p>Here, we define an <code class=\"language-text\">updatedTasks</code> constant that maps over the original <code class=\"language-text\">tasks</code> array. If the task's <code class=\"language-text\">id</code> property matches the <code class=\"language-text\">id</code> provided to the function, we use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\">object spread syntax</a> to create a new object, and toggle the <code class=\"language-text\">checked</code> property of that object before returning it. If it doesn't match, we return the original object.</p>\n<p>Then we call <code class=\"language-text\">setTasks()</code> with this new array in order to update our state.</p>\n<h2><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#deleting_a_task\" title=\"Permalink to Deleting a task\">Deleting a task</a></h2>\n<p>Deleting a task will follow a similar pattern to toggling its completed state: We need to define a function for updating our state, then pass that function into <code class=\"language-text\">&lt;Todo /></code> as a prop and call it when the right event happens.</p>\n<h3><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#the_deletetask_callback_prop\" title=\"Permalink to The deleteTask callback prop\">The <code class=\"language-text\">deleteTask</code> callback prop</a></h3>\n<p>Here we'll start by writing a <code class=\"language-text\">deleteTask()</code> function in your <code class=\"language-text\">App</code> component. Like <code class=\"language-text\">toggleTaskCompleted()</code>, this function will take an <code class=\"language-text\">id</code> parameter, and we will log that <code class=\"language-text\">id</code> to the console to start with. Add the following below <code class=\"language-text\">toggleTaskCompleted()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function deleteTask(id) {\n  console.log(id)\n}</code></pre></div>\n<p>Next, add another callback prop to our array of <code class=\"language-text\">&lt;Todo /></code> components:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const taskList = tasks.map(task => (\n  &lt;Todo\n    id={task.id}\n    name={task.name}\n    completed={task.completed}\n    key={task.id}\n    toggleTaskCompleted={toggleTaskCompleted}\n    deleteTask={deleteTask}\n  />\n));</code></pre></div>\n<p>In <code class=\"language-text\">Todo.js</code>, we want to call <code class=\"language-text\">props.deleteTask()</code> when the \"Delete\" button is pressed. <code class=\"language-text\">deleteTask()</code> needs to know the ID of the task that called it, so it can delete the correct task from the state.</p>\n<p>Update the \"Delete\" button inside Todo.js, like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;button\n  type=\"button\"\n  className=\"btn btn__danger\"\n  onClick={() => props.deleteTask(props.id)}\n>\n  Delete &lt;span className=\"visually-hidden\">{props.name}&lt;/span>\n&lt;/button></code></pre></div>\n<p>Now when you click on any of the \"Delete\" buttons in the app, your browser console should log the ID of the related task.</p>\n<h2><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state#deleting_tasks_from_state_and_ui\" title=\"Permalink to Deleting tasks from state and UI\">Deleting tasks from state and UI</a></h2>\n<p>Now that we know <code class=\"language-text\">deleteTask()</code> is invoked correctly, we can call our <code class=\"language-text\">setTasks()</code> hook in <code class=\"language-text\">deleteTask()</code> to actually delete that task from the app's state as well as visually in the app UI. Since <code class=\"language-text\">setTasks()</code> expects an array as an argument, we should provide it with a new array that copies the existing tasks, <em>excluding</em> the task whose ID matches the one passed into <code class=\"language-text\">deleteTask()</code>.</p>\n<p>This is a perfect opportunity to use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\"><code class=\"language-text\">Array.prototype.filter()</code></a>. We can test each task, and exclude a task from the new array if its <code class=\"language-text\">id</code> prop matches the <code class=\"language-text\">id</code> parameter passed into <code class=\"language-text\">deleteTask()</code>.</p>\n<p>Update the <code class=\"language-text\">deleteTask()</code> function inside your <code class=\"language-text\">App.js</code> file as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function deleteTask(id) {\n  const remainingTasks = tasks.filter(task => id !== task.id);\n  setTasks(remainingTasks);\n}</code></pre></div>"}