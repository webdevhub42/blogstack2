{"expireTime":9007200911206587000,"key":"transformer-remark-markdown-html-d5da845c975d294ef0382fa474f0c0a2-gatsby-remark-prismjs-","val":"<h1>Array.prototype.reduce()</h1>\n<p>The <code class=\"language-text\">reduce()</code> method executes a <strong>reducer</strong> function (that you provide) on each element of the array, resulting in a single output value.</p>\n<p>The <strong>reducer</strong> function takes four arguments:</p>\n<ol>\n<li>Accumulator</li>\n<li>Current Value</li>\n<li>Current Index</li>\n<li>Source Array</li>\n</ol>\n<p>Your <strong>reducer</strong> function's returned value is assigned to the accumulator, whose value is remembered across each iteration throughout the array, and ultimately becomes the final, single resulting value.</p>\n<h2>Syntax</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// Arrow function\nreduce((accumulator, currentValue) => { ... } )\nreduce((accumulator, currentValue, index) => { ... } )\nreduce((accumulator, currentValue, index, array) => { ... } )\nreduce((accumulator, currentValue, index, array) => { ... }, initialValue)\n\n// Reducer function\nreduce(reducerFn)\nreduce(reducerFn, initialValue)\n\n// Inline reducer function\nreduce(function reducerFn(accumulator, currentValue) { ... })\nreduce(function reducerFn(accumulator, currentValue, index) { ... })\nreduce(function reducerFn(accumulator, currentValue, index, array){ ... })\nreduce(function reducerFn(accumulator, currentValue, index, array) { ... }, initialValue)</code></pre></div>\n<h3>Parameters</h3>\n<p><code class=\"language-text\">callback</code>\nA function to execute on each element in the array (except for the first, if no <code class=\"language-text\">initialValue</code> is supplied).</p>\n<p>It takes four arguments:</p>\n<p><code class=\"language-text\">accumulator</code>\nThe accumulator accumulates callback's return values. It is the accumulated value previously returned in the last invocation of the callbackâ€”or <code class=\"language-text\">initialValue</code>, if it was supplied (see below).</p>\n<p><code class=\"language-text\">currentValue</code>\nThe current element being processed in the array.</p>\n<p><code class=\"language-text\">index</code> <span class=\"badge inline optional\">Optional</span>\nThe index of the current element being processed in the array. Starts from index <code class=\"language-text\">0</code> if an <code class=\"language-text\">initialValue</code> is provided. Otherwise, it starts from index <code class=\"language-text\">1</code>.</p>\n<p><code class=\"language-text\">array</code> <span class=\"badge inline optional\">Optional</span>\nThe array <code class=\"language-text\">reduce()</code> was called upon.</p>\n<p><code class=\"language-text\">initialValue</code> <span class=\"badge inline optional\">Optional</span>\nA value to use as the first argument to the first call of the <code class=\"language-text\">callback</code>. If no <code class=\"language-text\">initialValue</code> is supplied, the first element in the array will be used as the initial <code class=\"language-text\">accumulator</code> value and skipped as <code class=\"language-text\">currentValue</code>. Calling <code class=\"language-text\">reduce()</code> on an empty array without an <code class=\"language-text\">initialValue</code> will throw a <a href=\"../typeerror\"><code class=\"language-text\">TypeError</code></a>.</p>\n<h3>Return value</h3>\n<p>The single value that results from the reduction.</p>\n<h2>Description</h2>\n<p>The <code class=\"language-text\">reduce()</code> method executes the <code class=\"language-text\">callback</code> once for each assigned value present in the array, taking four arguments:</p>\n<ol>\n<li><code class=\"language-text\">accumulator</code></li>\n<li><code class=\"language-text\">currentValue</code></li>\n<li><code class=\"language-text\">currentIndex</code></li>\n<li><code class=\"language-text\">array</code></li>\n</ol>\n<p>The first time the callback is called, <code class=\"language-text\">accumulator</code> and <code class=\"language-text\">currentValue</code> can be one of two values. If <code class=\"language-text\">initialValue</code> is provided in the call to <code class=\"language-text\">reduce()</code>, then <code class=\"language-text\">accumulator</code> will be equal to <code class=\"language-text\">initialValue</code>, and <code class=\"language-text\">currentValue</code> will be equal to the first value in the array. If no <code class=\"language-text\">initialValue</code> is provided, then <code class=\"language-text\">accumulator</code> will be equal to the first value in the array, and <code class=\"language-text\">currentValue</code> will be equal to the second.</p>\n<p><strong>Note:</strong> If <code class=\"language-text\">initialValue</code> is not provided, <code class=\"language-text\">reduce()</code> will execute the callback function starting at index <code class=\"language-text\">1</code>, skipping the first index. If <code class=\"language-text\">initialValue</code> is provided, it will start at index <code class=\"language-text\">0</code>.</p>\n<p>If the array is empty and no <code class=\"language-text\">initialValue</code> is provided, <a href=\"../typeerror\"><code class=\"language-text\">TypeError</code></a> will be thrown.</p>\n<p>If the array only has one element (regardless of position) and no <code class=\"language-text\">initialValue</code> is provided, or if <code class=\"language-text\">initialValue</code> is provided but the array is empty, the solo value will be returned <em>without</em> calling <em><code class=\"language-text\">callback</code>.</em></p>\n<p>It is almost always safer to provide an <code class=\"language-text\">initialValue</code>, because there can be up to <em>four</em> possible output types without <code class=\"language-text\">initialValue</code>, as shown in the following example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let maxCallback = ( acc, cur ) => Math.max( acc.x, cur.x );\nlet maxCallback2 = ( max, cur ) => Math.max( max, cur );\n\n// reduce without initialValue\n[ { x: 2 }, { x: 22 }, { x: 42 } ].reduce( maxCallback ); // NaN\n[ { x: 2 }, { x: 22 }            ].reduce( maxCallback ); // 22\n[ { x: 2 }                       ].reduce( maxCallback ); // { x: 2 }\n[                                ].reduce( maxCallback ); // TypeError\n\n// map &amp; reduce with initialValue; better solution, also works for empty or larger arrays\n[ { x: 22 }, { x: 42 } ].map( el => el.x )\n                        .reduce( maxCallback2, -Infinity );</code></pre></div>\n<h3>How reduce() works</h3>\n<p>Suppose the following use of <code class=\"language-text\">reduce()</code> occurred:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[0, 1, 2, 3, 4].reduce(function(accumulator, currentValue, currentIndex, array) {\n  return accumulator + currentValue\n})</code></pre></div>\n<p>The callback would be invoked four times, with the arguments and return values in each call being as follows:</p>\n<table>\n<thead>\n<tr class=\"header\">\n<th>\n<code>callback</code> iteration</th>\n<th>\n<code>accumulator</code>\n</th>\n<th>\n<code>currentValue</code>\n</th>\n<th>\n<code>currentIndex</code>\n</th>\n<th>\n<code>array</code>\n</th>\n<th>return value</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>first call</td>\n<td>\n<code>0</code>\n</td>\n<td>\n<code>1</code>\n</td>\n<td>\n<code>1</code>\n</td>\n<td>\n<code>[0, 1, 2, 3, 4]</code>\n</td>\n<td>\n<code>1</code>\n</td>\n</tr>\n<tr class=\"even\">\n<td>second call</td>\n<td>\n<code>1</code>\n</td>\n<td>\n<code>2</code>\n</td>\n<td>\n<code>2</code>\n</td>\n<td>\n<code>[0, 1, 2, 3, 4]</code>\n</td>\n<td>\n<code>3</code>\n</td>\n</tr>\n<tr class=\"odd\">\n<td>third call</td>\n<td>\n<code>3</code>\n</td>\n<td>\n<code>3</code>\n</td>\n<td>\n<code>3</code>\n</td>\n<td>\n<code>[0, 1, 2, 3, 4]</code>\n</td>\n<td>\n<code>6</code>\n</td>\n</tr>\n<tr class=\"even\">\n<td>fourth call</td>\n<td>\n<code>6</code>\n</td>\n<td>\n<code>4</code>\n</td>\n<td>\n<code>4</code>\n</td>\n<td>\n<code>[0, 1, 2, 3, 4]</code>\n</td>\n<td>\n<code>10</code>\n</td>\n</tr>\n</tbody>\n</table>\n<p>The value returned by <code class=\"language-text\">reduce()</code> would be that of the last callback invocation (<code class=\"language-text\">10</code>).</p>\n<p>You can also provide an <a href=\"../../functions/arrow_functions\">Arrow Function</a> instead of a full function. The code below will produce the same output as the code in the block above:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[0, 1, 2, 3, 4].reduce( (accumulator, currentValue, currentIndex, array) => accumulator + currentValue )</code></pre></div>\n<p>If you were to provide an <code class=\"language-text\">initialValue</code> as the second argument to <code class=\"language-text\">reduce()</code>, the result would look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[0, 1, 2, 3, 4].reduce((accumulator, currentValue, currentIndex, array) => {\n    return accumulator + currentValue\n}, 10)</code></pre></div>\n<table>\n<thead>\n<tr class=\"header\">\n<th>\n<code>callback</code> iteration</th>\n<th>\n<code>accumulator</code>\n</th>\n<th>\n<code>currentValue</code>\n</th>\n<th>\n<code>currentIndex</code>\n</th>\n<th>\n<code>array</code>\n</th>\n<th>return value</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>first call</td>\n<td>\n<code>10</code>\n</td>\n<td>\n<code>0</code>\n</td>\n<td>\n<code>0</code>\n</td>\n<td>\n<code>[0, 1, 2, 3, 4]</code>\n</td>\n<td>\n<code>10</code>\n</td>\n</tr>\n<tr class=\"even\">\n<td>second call</td>\n<td>\n<code>10</code>\n</td>\n<td>\n<code>1</code>\n</td>\n<td>\n<code>1</code>\n</td>\n<td>\n<code>[0, 1, 2, 3, 4]</code>\n</td>\n<td>\n<code>11</code>\n</td>\n</tr>\n<tr class=\"odd\">\n<td>third call</td>\n<td>\n<code>11</code>\n</td>\n<td>\n<code>2</code>\n</td>\n<td>\n<code>2</code>\n</td>\n<td>\n<code>[0, 1, 2, 3, 4]</code>\n</td>\n<td>\n<code>13</code>\n</td>\n</tr>\n<tr class=\"even\">\n<td>fourth call</td>\n<td>\n<code>13</code>\n</td>\n<td>\n<code>3</code>\n</td>\n<td>\n<code>3</code>\n</td>\n<td>\n<code>[0, 1, 2, 3, 4]</code>\n</td>\n<td>\n<code>16</code>\n</td>\n</tr>\n<tr class=\"odd\">\n<td>fifth call</td>\n<td>\n<code>16</code>\n</td>\n<td>\n<code>4</code>\n</td>\n<td>\n<code>4</code>\n</td>\n<td>\n<code>[0, 1, 2, 3, 4]</code>\n</td>\n<td>\n<code>20</code>\n</td>\n</tr>\n</tbody>\n</table>\n<p>The value returned by <code class=\"language-text\">reduce()</code> in this case would be <code class=\"language-text\">20</code>.</p>\n<h2>Polyfill</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// Production steps of ECMA-262, Edition 5, 15.4.4.21\n// Reference: https://es5.github.io/#x15.4.4.21\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\nif (!Array.prototype.reduce) {\n  Object.defineProperty(Array.prototype, 'reduce', {\n    value: function(callback /*, initialValue*/) {\n      if (this === null) {\n        throw new TypeError( 'Array.prototype.reduce ' +\n          'called on null or undefined' );\n      }\n      if (typeof callback !== 'function') {\n        throw new TypeError( callback +\n          ' is not a function');\n      }\n\n      // 1. Let O be ? ToObject(this value).\n      var o = Object(this);\n\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n      var len = o.length >>> 0;\n\n      // Steps 3, 4, 5, 6, 7\n      var k = 0;\n      var value;\n\n      if (arguments.length >= 2) {\n        value = arguments[1];\n      } else {\n        while (k &lt; len &amp;&amp; !(k in o)) {\n          k++;\n        }\n\n        // 3. If len is 0 and initialValue is not present,\n        //    throw a TypeError exception.\n        if (k >= len) {\n          throw new TypeError( 'Reduce of empty array ' +\n            'with no initial value' );\n        }\n        value = o[k++];\n      }\n\n      // 8. Repeat, while k &lt; len\n      while (k &lt; len) {\n        // a. Let Pk be ! ToString(k).\n        // b. Let kPresent be ? HasProperty(O, Pk).\n        // c. If kPresent is true, then\n        //    i.  Let kValue be ? Get(O, Pk).\n        //    ii. Let accumulator be ? Call(\n        //          callbackfn, undefined,\n        //          Â« accumulator, kValue, k, O Â»).\n        if (k in o) {\n          value = callback(value, o[k], k, o);\n        }\n\n        // d. Increase k by 1.\n        k++;\n      }\n\n      // 9. Return accumulator.\n      return value;\n    }\n  });\n}</code></pre></div>\n<p><strong>Note:</strong> If you need to support truly obsolete JavaScript engines that do not support <a href=\"../object/defineproperty\"><code class=\"language-text\">Object.defineProperty()</code></a>, it is best not to polyfill <code class=\"language-text\">Array.prototype</code> methods at all, as you cannot make them <strong>non-enumerable</strong>.</p>\n<h2>Examples</h2>\n<h3>Sum all the values of an array</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let sum = [0, 1, 2, 3].reduce(function (accumulator, currentValue) {\n  return accumulator + currentValue\n}, 0)\n// sum is 6</code></pre></div>\n<p>Alternatively written with an arrow function:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let total = [ 0, 1, 2, 3 ].reduce(\n  ( accumulator, currentValue ) => accumulator + currentValue,\n  0\n)</code></pre></div>\n<h3>Sum of values in an object array</h3>\n<p>To sum up the values contained in an array of objects, you <strong>must</strong> supply an <code class=\"language-text\">initialValue</code>, so that each item passes through your function.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let initialValue = 0\nlet sum = [{x: 1}, {x: 2}, {x: 3}].reduce(function (accumulator, currentValue) {\n    return accumulator + currentValue.x\n}, initialValue)\n\nconsole.log(sum) // logs 6</code></pre></div>\n<p>Alternatively written with an arrow function:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let initialValue = 0\nlet sum = [{x: 1}, {x: 2}, {x: 3}].reduce(\n    (accumulator, currentValue) => accumulator + currentValue.x\n    , initialValue\n)\n\nconsole.log(sum) // logs 6</code></pre></div>\n<h3>Flatten an array of arrays</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let flattened = [[0, 1], [2, 3], [4, 5]].reduce(\n  function(accumulator, currentValue) {\n    return accumulator.concat(currentValue)\n  },\n  []\n)\n// flattened is [0, 1, 2, 3, 4, 5]</code></pre></div>\n<p>Alternatively written with an arrow function:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let flattened = [[0, 1], [2, 3], [4, 5]].reduce(\n  ( accumulator, currentValue ) => accumulator.concat(currentValue),\n  []\n)</code></pre></div>\n<h3>Counting instances of values in an object</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let names = ['Alice', 'Bob', 'Tiff', 'Bruce', 'Alice']\n\nlet countedNames = names.reduce(function (allNames, name) {\n  if (name in allNames) {\n    allNames[name]++\n  }\n  else {\n    allNames[name] = 1\n  }\n  return allNames\n}, {})\n// countedNames is:\n// { 'Alice': 2, 'Bob': 1, 'Tiff': 1, 'Bruce': 1 }</code></pre></div>\n<h3>Grouping objects by a property</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let people = [\n  { name: 'Alice', age: 21 },\n  { name: 'Max', age: 20 },\n  { name: 'Jane', age: 20 }\n];\n\nfunction groupBy(objectArray, property) {\n  return objectArray.reduce(function (acc, obj) {\n    let key = obj[property]\n    if (!acc[key]) {\n      acc[key] = []\n    }\n    acc[key].push(obj)\n    return acc\n  }, {})\n}\n\nlet groupedPeople = groupBy(people, 'age')\n// groupedPeople is:\n// {\n//   20: [\n//     { name: 'Max', age: 20 },\n//     { name: 'Jane', age: 20 }\n//   ],\n//   21: [{ name: 'Alice', age: 21 }]\n// }</code></pre></div>\n<h3>Bonding arrays contained in an array of objects using the spread operator and initialValue</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// friends - an array of objects\n// where object field \"books\" is a list of favorite books\nlet friends = [{\n  name: 'Anna',\n  books: ['Bible', 'Harry Potter'],\n  age: 21\n}, {\n  name: 'Bob',\n  books: ['War and peace', 'Romeo and Juliet'],\n  age: 26\n}, {\n  name: 'Alice',\n  books: ['The Lord of the Rings', 'The Shining'],\n  age: 18\n}]\n\n// allbooks - list which will contain all friends' books +\n// additional list contained in initialValue\nlet allbooks = friends.reduce(function(accumulator, currentValue) {\n  return [...accumulator, ...currentValue.books]\n}, ['Alphabet'])\n\n// allbooks = [\n//   'Alphabet', 'Bible', 'Harry Potter', 'War and peace',\n//   'Romeo and Juliet', 'The Lord of the Rings',\n//   'The Shining'\n// ]</code></pre></div>\n<h3>Remove duplicate items in an array</h3>\n<p><strong>Note:</strong> If you are using an environment compatible with <a href=\"../set\"><code class=\"language-text\">Set</code></a> and <a href=\"from\"><code class=\"language-text\">Array.from()</code></a>, you could use <code class=\"language-text\">let orderedArray = Array.from(new Set(myArray))</code> to get an array where duplicate items have been removed.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let myArray = ['a', 'b', 'a', 'b', 'c', 'e', 'e', 'c', 'd', 'd', 'd', 'd']\nlet myOrderedArray = myArray.reduce(function (accumulator, currentValue) {\n  if (accumulator.indexOf(currentValue) === -1) {\n    accumulator.push(currentValue)\n  }\n  return accumulator\n}, [])\n\nconsole.log(myOrderedArray)</code></pre></div>\n<h3>Replace .filter().map() with .reduce()</h3>\n<p>Using <a href=\"filter\"><code class=\"language-text\">Array.filter()</code></a> then <a href=\"map\"><code class=\"language-text\">Array.map()</code></a> traverses the array twice, but you can achieve the same effect while traversing only once with <a href=\"reduce\"><code class=\"language-text\">Array.reduce()</code></a>, thereby being more efficient. (If you like for loops, you can filter and map while traversing once with <a href=\"foreach\"><code class=\"language-text\">Array.forEach()</code></a>).</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const numbers = [-5, 6, 2, 0,];\n\nconst doubledPositiveNumbers = numbers.reduce((accumulator, currentValue) => {\n  if (currentValue > 0) {\n    const doubled = currentValue * 2;\n    accumulator.push(doubled);\n  }\n  return accumulator;\n}, []);\n\nconsole.log(doubledPositiveNumbers); // [12, 4]</code></pre></div>\n<h3>Running Promises in Sequence</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/**\n * Runs promises from array of functions that can return promises\n * in chained manner\n *\n * @param {array} arr - promise arr\n * @return {Object} promise object\n */\nfunction runPromiseInSequence(arr, input) {\n  return arr.reduce(\n    (promiseChain, currentFunction) => promiseChain.then(currentFunction),\n    Promise.resolve(input)\n  )\n}\n\n// promise function 1\nfunction p1(a) {\n  return new Promise((resolve, reject) => {\n    resolve(a * 5)\n  })\n}\n\n// promise function 2\nfunction p2(a) {\n  return new Promise((resolve, reject) => {\n    resolve(a * 2)\n  })\n}\n\n// function 3  - will be wrapped in a resolved promise by .then()\nfunction f3(a) {\n return a * 3\n}\n\n// promise function 4\nfunction p4(a) {\n  return new Promise((resolve, reject) => {\n    resolve(a * 4)\n  })\n}\n\nconst promiseArr = [p1, p2, f3, p4]\nrunPromiseInSequence(promiseArr, 10)\n  .then(console.log)   // 1200</code></pre></div>\n<h3>Function composition enabling piping</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// Building-blocks to use for composition\nconst double = x => x + x\nconst triple = x => 3 * x\nconst quadruple = x => 4 * x\n\n// Function composition enabling pipe functionality\nconst pipe = (...functions) => input => functions.reduce(\n    (acc, fn) => fn(acc),\n    input\n)\n\n// Composed functions for multiplication of specific values\nconst multiply6 = pipe(double, triple)\nconst multiply9 = pipe(triple, triple)\nconst multiply16 = pipe(quadruple, quadruple)\nconst multiply24 = pipe(double, triple, quadruple)\n\n// Usage\nmultiply6(6)   // 36\nmultiply9(9)   // 81\nmultiply16(16) // 256\nmultiply24(10) // 240</code></pre></div>\n<h3>Write map using reduce</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">if (!Array.prototype.mapUsingReduce) {\n  Array.prototype.mapUsingReduce = function(callback, initialValue) {\n    return this.reduce(function(mappedArray, currentValue, index, array) {\n      mappedArray[index] = callback.call(initialValue, currentValue, index, array)\n      return mappedArray\n    }, [])\n  }\n}\n\n[1, 2, , 3].mapUsingReduce(\n  (currentValue, index, array) => currentValue + index + array.length\n) // [5, 7, , 10]</code></pre></div>"}